<!doctype html>
<html>
<head>
<title>Example Domain</title>

<meta charset="utf-8" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style type="text/css">
body {
*{
font-family: "Quicksand", sans-serif;
}
*:active, *:focus{
outline: none;
}
body{
background: #fff;
width: 600px;
margin: 5em auto;
padding: 2em;
}
.wrapper{
animation: fadeIn 0.8s;
}
label{
display: block;
color: #333;
font-size: 2.3em;
opacity: 0;
transition: all 1s;
}
input{
display: block;
width: 100%;
background: transparent;
border: none;
padding: 20px 10px 10px;
color: #eee;
font-size: 1.2em;
font-family: "Raleway", sans-serif;
}
button{
display: inline-block;
color: #333;
background-color: #eee;
border: none;
padding: 0.5em;
width: 9em;
transition: 0.3s;
margin: 0.2em;
text-transform: uppercase;
font-size: 1.2em;
}
button:hover{
background-color: #ddd;
}
.input-bar{
width: 100%;
height: 1px;
background-color: #555;
}
.progress-bar{
width: 20%;
height: 2px;
background-color: #fff;
}
.steps-navigation{
float: right;
padding: 30px;
}
.current label{
opacity: 1;
transition: all 1s;
}
button{
cursor: pointer;
}
@keyframes fadeIn {
from{ 
opacity:  0; 
}
to{
opacity: 1;
}
}
@keyframes fadeInOut {
0%{ 
opacity:  0; 
}
50%{
opacity: 1;
}
100%{
opacity: 0;
}
}

@media (max-width: 700px) {
body {
margin: 0 auto;
width: auto;
}
}
</style>    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-debug.js"></script>
</head>

<body>
<div class="wrapper">
<form class="steps">
<div>
<div class="step1" data-bind="fadeVisible: step() == 1, css: {current : step() == 1}, hasfocus: step() == 1">
<label>What's your name?</label>
<input type="text" name="name" data-bind="value: name">
</div>
<div class="step2" data-bind="fadeVisible: step() == 2, css: {current : step() == 2}, hasfocus: step() == 2">
<label>What's your e-mail?</label>
<input type="email" name="email" data-bind="value: email">
</div>
<div class="step3" data-bind="fadeVisible: step() == 3, css: {current : step() == 3}, hasfocus: step() == 3">
<label>Can I call you?</label>
<input type="phone" name="phone" data-bind="value: phone">
</div>
<div class="step4" data-bind="fadeVisible: step() == 4, css: {current : step() == 4}, hasfocus: step() == 4">
<label>What do you want to talk about?</label>
<input type="text" name="subject" data-bind="value: subject">
</div>
<div class="step5" data-bind="fadeVisible: step() == 5, css: {current : step() == 5}, hasfocus: step() == 5">
<label>Thank you, <span data-bind="text: name"></span>!<br>
Soon we'll be in touch. </label>
<br>
</div>
</div>
<div class="progress">
<div class="input-bar"></div>
<div class="progress-bar"></div>
</div>
<div class="steps-navigation">
<button class="prev" data-bind="visible: step() > 1, click: prev">previous</button>
<button class="next" data-bind="visible: step() < 4, click: next">next</button>
<button id="done" data-bind="visible: step() == 4, click: next">done</button>
</div>
</form>
</div>
</body>
<script>
var vm = {
name : ko.observable(""),
email : ko.observable(""),
phone : ko.observable(""),
subject : ko.observable(""),
step : ko.observable(1),
prev : function(){
var step = vm.step()-1;
if(step >= 1){
vm.step(step);
$('.progress-bar').animate({
width: step * 20 + '%'
});
}
},
next : function(){
var step = vm.step()+1;
if(step <= 5){
vm.step(step);
$('.progress-bar').animate({
width: step * 20 + '%'
});
}
}
}

ko.bindingHandlers.fadeVisible = {
init: function(element, valueAccessor) {
// Initially set the element to be instantly visible/hidden depending on the value
var value = valueAccessor();
$(element).toggle(ko.unwrap(value)); // Use "unwrapObservable" so we can handle values that may or may not be observable
},
update: function(element, valueAccessor) {
// Whenever the value subsequently changes, slowly fade the element in or out
var value = valueAccessor();
ko.unwrap(value) ? $(element).fadeIn() : $(element).hide();
}
};


ko.applyBindings(vm);
</script>
</html>
